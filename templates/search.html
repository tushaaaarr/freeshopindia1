{% extends 'base.html' %}
{%load static%}
{% block title %} Home {% endblock title %}
{% block filter %}
{% endblock filter%}
{% block body %}




<div class="container my-5">
    <div class="py-5">
    </div>
    <ul class="nav nav-tabs">                      
          </li> 
          <div class="dropdown mx-5 mb-3">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  Filter
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <form class="btn" method='get'> <button value="ascending", name="ascending"> Low to hight</button></form>
                <form class="btn" method='get'> <button value="descending", name="ascending">High to low</button></form>
                 <form method='get' action="/searched_filter">
        <h6 class="card-header">Price</h6>
        <div class="list-group list-group-flush">
            <li class="list-group-item">
                <input type="range" value="{{minMaxPrice.price__min}}" max={{minMaxPrice.price__max}}
                    min={{minMaxPrice.price__min}} id="rangeInput" oninput="maxPrice.value=this.value"
                    name='filter' />
            </li>
            <li class="list-group-item">
                Max: <input type="number" value="{{minMaxPrice.price__min}}" max={{minMaxPrice.price__max}}
                    min={{minMaxPrice.price__min}} class="form-control" id="maxPrice"
                    onkeyup="rangeInput.value=this.value" id="maxPrice" />
                <button id="priceFilterBtn" class="btn btn-info btn-sm mt-1 my-3">Go</button>
            </li>
        </div>
  </div>
  </form></div>
  </li>
  
  </div>
  </li>
  </ul>
  </div>
  <div class="container my-5">
  <div id="myBtnContainer">
    <button class="btn mx-3" style="font-size: 13px;"> <a class=" text-dark"  href="searched_filter?ascending=ascending" style="text-decoration: none;">Low to high </a></button>
   <button  class="btn mx-3" style="font-size: 13px;"> <a class="mx-3 text-dark" href="searched_filter?ascending=descending" style="text-decoration: none;">High to low</a></button>
       
 
  </div>
  </div>
  
  {% if price_range_filter %}
  <div class="filter_range" id ="filter_range" style="display: block;">
  <div class="container my-5">
  <div class="row">
        {% for i in price_range_filter %}
        {%if i.sub_category == 'mobile'%}
        <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:18rem;" style="text-decoration:none;">
              <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:80px;height:160px;"></a>
             
          {%elif i.sub_category == 'laptop' or i.sub_category == 'television'%}
        <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
              <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:200;height:100px;"></a>
       
          {%else%}
        <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
              <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:120px;height:120px;"></a>
          {%endif%}
              <div class="card-body">
                    <p class="card-title text-center"> <a style="text-decoration:none;" class='text-dark'
                                href="products/{{i.id}}">
                                {{i.product_name}}</a></p>
                    <p class="card-text text-center"><a style="text-decoration:none;" class='text-dark'
                                href="products/{{i.id}}">{{i.desc}} </a></p>
                    <!-- <p class="card-text text-center text-success"> ₹{{i.price}} Save ₹2,000</p> -->
                    <p class="card-text"><small class="text-muted">Released {{i.pub_date}} </small></p>
              </div>
        </div>
        {%endfor%}
  </div>
  </div>
  </div> 
  <div class="container my-5">
  <nav aria-label="...">
        <ul class="pagination">
              <li class="page-item ">
                    {% if prev %}
                    <a class="page-link" href="/searched_filter?filter={{filtered_price}}&page={{prev}}">Previous</a>
                    {% else %}
                    {% endif %}
              </li>
              {% for x in page_len_filter %}
              <!-- <li class="page-item"><a class="page-link" href="/{{sub_cat}}?filter={{filtered_price}}&page={{x}}">{{x}}</a></li> -->
              {% endfor %}
              {% if nxt %}
              <a class="page-link" href="/searched_filter?filter={{filtered_price}}&page={{nxt}}">Next</a>
              {% else %}
              {% endif %}
              </li>
        </ul>
  </nav>
  </div>
  


{%elif Low_High %}
<div class="filter_range" id ="filter_range" style="display: block;">
    <div class="container my-5">
    <div class="row">
          {% for i in Low_High %}
          {%if i.sub_category == 'mobile'%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:18rem;" style="text-decoration:none;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:80px;height:160px;"></a>
                   
                {%elif i.sub_category == 'laptop' or i.sub_category == 'television'%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:200;height:100px;"></a>
             
                {%else%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:120px;height:120px;"></a>
                {%endif%}
                <div class="card-body" style="text-decoration:none;">
                      <p class="card-title text-center"> <a style="text-decoration:none;" class='text-dark'
                                  href="products/{{i.id}}">
                                  {{i.product_name}}</a></p>
                      <p class="card-text text-center"><a style="text-decoration:none;" class='text-dark'
                                  href="products/{{i.id}}">{{i.desc}} </a></p>
                      <!-- <p class="card-text text-center text-success"> ₹{{i.price}} Save ₹2,000</p> -->
                      <!-- <p class="card-text"><small class="text-muted">Released {{i.pub_date}} </small></p> -->
                </div>
          </div>
          {%endfor%}
    </div>
    </div>
    </div> 
    <div class="container my-5">
    <nav aria-label="...">
          <ul class="pagination">
                <li class="page-item ">
                      {% if prev %}
                      <a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{prev}}">Previous</a>
                      {% else %}
                      {% endif %}
                </li>
                {% for x in page_len_filter %}
                <li class="page-item"><a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{x}}">{{x}}</a></li>
                {% endfor %}
                {% if nxt %}
                <a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{nxt}}">Next</a>
                {% else %}
                {% endif %}
                </li>
          </ul>
    </nav>
    </div>


  {%else%}
  <div class="filterDiv all">
  <div class="container my-5">
        <div class="row">
              {% for i in product %}
              {%if i.sub_category == 'mobile'%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:18rem;" style="text-decoration:none;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:80px;height:160px;"></a>
                   
                {%elif i.sub_category == 'laptop' or i.sub_category == 'television'%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:200;height:100px;"></a>
             
                {%else%}
              <div class="card mx-auto my-2 p-2 align-items-center" style="width: 15rem; height:17rem;">
                    <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:120px;height:120px;"></a>
                {%endif%}
        <div class="card-body my-3">
                          <p class="card-title text-center"> <a style="text-decoration:none;" class='text-dark'
                                      href="products/{{i.id}}">
                                      {{i.product_name}}</a></p>
                          <p class="card-text text-center"><a style="text-decoration:none;" class='text-da    rk'
                                      href="products/{{i.id}}">{{i.desc}} </a></p>
                          <!-- <p class="card-text text-center text-success"> ₹{{i.price}} Save ₹2,000</p> -->
                          <p class="card-text"><small class="text-muted">Released {{i.pub_date}} </small></p>
                    </div>
              </div>
              {%endfor%}
        </div>
  </div>
  {%if filtered_price%}    
  <div class="container my-5">
  <nav aria-label="...">
        <ul class="pagination">
              <li class="page-item ">
                    {% if prev %}
                    <a class="page-link" href="/searched_filter?page={{prev}}">Previous</a>
                    {% else %}
                    {% endif %}
              </li>
              {% for x in page_len %}
              <li class="page-item"><a class="page-link" href="/searched_filter?page={{x}}">{{x}}</a></li>
              {% endfor %}
              {% if nxt %}
              <a class="page-link" href="/searched_filter?page={{nxt}}">Next</a>
              {% else %}
              {% endif %}
              </li>
        </ul>
  </nav>
  </div>
  {% elif filtered_price is none and low_high is none %}
  <div class="container my-5">
  <nav aria-label="...">
        <ul class="pagination">
              <li class="page-item ">
                    {% if prev %} 
                    <a class="page-link" href="search?query={{query}}&page={{prev}}">Previous</a>
                    {% else %}
                    {% endif %}
              </li>
              {% for x in page_len %}
              <!-- <li class="page-item"><a class="page-link" href="/search?query=laptop&page={{x}}">{{x}}</a></li> -->
              {% endfor %}
              {% if nxt %}
              <a class="page-link" href="/search?query={{query}}&page={{nxt}}">Next</a>
              {% else %}
              {% endif %}
              </li>
        </ul>
  </nav>
  </div>
  {%elif low_high%}
  <div class="container my-5">
    <nav aria-label="...">
          <ul class="pagination">
                <li class="page-item ">
                  {% if prev %}
                  <a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{prev}}">Previous</a>
                  {% else %}
                  {% endif %}
            </li>
            {% for x in page_len_filter %}
            <li class="page-item"><a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{x}}">{{x}}</a></li>
            {% endfor %}
            {% if nxt %}
            <a class="page-link" href="/searched_filter?ascending={{low_high}}&page={{nxt}}">Next</a>
            {% else %}
            {% endif %}                </li>
          </ul>
    </nav>
    </div>

  {%endif%}
  </div>
  </div>
  
  
  {%endif%}
  
  
  



























<!--

<div class="my-5">

                </div>
<ul class="nav nav-tabs">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
            aria-expanded="false">Category</a>
        <div class="dropdown-menu">
            <a class="dropdown-item" href="mobile">Mobiles</a>
            <a class="dropdown-item" href="wears">Wears</a>
            <a class="dropdown-item" href="shoes">Shoes</a>
            <a class="dropdown-item" href="beauty_health">Beauty and Health</a>
            <a class="dropdown-item" href=""></a>
    </li>
    <li class="nav-item">
        </div>
    </li>
</ul>
</div>
{% comment %} <h2>Search results : </h2> {% endcomment %}
{% if ascending_allposts %}
<div class="container">
    <div class="row">
         {% for i in allPosts %}
                 <div class="card mx-auto my-2 p-2 align-items-center" style="width: 28rem; height:32rem;">
        {% if i.sub_category in 'laptop' or  i.sub_category in 'shoes' %}
 <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:350px;
            height:250px;" class="padded card-img-top" alt="..."></a>

    {% elif i.sub_category in 'mobile' %}
        <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:180px;
            height:280px;" class="padded card-img-top" alt="..."></a>
        {% else %}
        <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:280px;height:320px;"
            class="padded card-img-top" alt="..."></a>
        {% endif %}
        <div class="card-body">
          <h5 class="card-title text-center"> <a style="text-decoration:none;" class='text-dark' href="products/{{i.id}}">
              {{i.product_name}}</a></h5>
          <p class="card-text text-center"><a style="text-decoration:none;" class='text-dark' href="products/{{i.id}}">{{i.desc}} </a></p>
          <p class="card-text text-center text-success"> ₹{{i.price}} Save ₹2,000</p>
          <p class="card-text"><small class="text-muted">Released {{i.pub_date}} </small></p>
        </div>
      </div>
      {%endfor%}

        </section>
    </div>
</div>
 <div class="container my-5 text-center">
    <nav aria-label="...">
      <ul class="pagination">
        <li class="page-item ">
          {% if prev %}
          <a class="page-link" href="/search?query={{query}}&page={{prev}}">Previous</a>
          {% else %}
          {% endif %}
        </li>
       
        {% for x in page_len %}
        <li class="page-item"><a class="page-link" href="/search?query={{query}}&page={{x}}">{{x}}</a></li>
        {% endfor %}
        {% if nxt %}
        <a class="page-link" href="/search?query={{query}}&page={{nxt}}">Next</a>
        {% else %}
        {% endif %}
        </li>
      </ul>
    </nav>

    {% else %}
    {% if allPosts|length < 1 %} <p>No search results</p>
        Your search query : <b>{{query}}</b> did not match any documents. <br>
        Suggestions:
        <ul>
            <li>Make sure that all words are spelled correctly.</li>
            <li>Try more general keywords.</li>
            <li> Try fewer keywords.</li>
            <li> Try different keywords.</li>
            </li>
        </ul>
        {% endif %}
        <div class="container">
            <div class="row">
                {% for i in allPosts %}
                 <div class="card mx-auto my-2 p-2 align-items-center" style="width: 28rem; height:32rem;">
        {% if i.sub_category in 'laptop' or  i.sub_category in 'shoes' %}
 <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:350px;
            height:250px;" class="padded card-img-top" alt="..."></a>

    {% elif i.sub_category in 'mobile' %}
        <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:180px;
            height:280px;" class="padded card-img-top" alt="..."></a>
        {% else %}
        <a href="products/{{i.id}}"> <img src="{{i.img_url1}}" style="width:280px;height:320px;"
            class="padded card-img-top" alt="..."></a>
        {% endif %}
        <div class="card-body">
          <h5 class="card-title text-center"> <a style="text-decoration:none;" class='text-dark' href="products/{{i.id}}">
              {{i.product_name}}</a></h5>
          <p class="card-text text-center"><a style="text-decoration:none;" class='text-dark' href="products/{{i.id}}">{{i.desc}} </a></p>
          <p class="card-text text-center text-success"> ₹{{i.price}} Save ₹2,000</p>
          <p class="card-text"><small class="text-muted">Released {{i.pub_date}} </small></p>
        </div>
      </div>
      {%endfor%}
      </section>
            </div>
        </div>
      <div class="container my-5 text-center">
    <nav aria-label="...">
      <ul class="pagination">
        <li class="page-item ">
          {% if prev %}
          <a class="page-link" href="/search?query={{query}}&page={{prev}}">Previous</a>
          {% else %}
          {% endif %}
        </li>
       
        {% for x in page_len %}
        <li class="page-item"><a class="page-link" href="/search?query={{query}}&page={{x}}">{{x}}</a></li>
        {% endfor %}
        {% if nxt %}
        <a class="page-link" href="/search?query={{query}}&page={{nxt}}">Next</a>
        {% else %}
        {% endif %}
        </li>
      </ul>
    </nav>

            {% endif %}
            </div>
            </div>
            
            <script>
                $(function () {
                    $("#query").autocomplete({
                        source: '{% url 'search' %}',
                        minLength: 2
                    });
                });

            </script> -->
            {% endblock body %}